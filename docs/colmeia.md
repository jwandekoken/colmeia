# Project: Militancy 2.0 - The "Uberization" of Campaigns (2026 Elections)

## 1. Overview and Value Proposition

The project aims to create a hybrid platform (CRM + Automation) focused on decentralizing political communication. Instead of relying on centralized mass messaging (expensive, risky, and subject to blocking), the platform organizes **human capital** (campaign workers/volunteers) to act as an engine for organic distribution.

**Central Concept:** Transforming passive supporters into active ones through gamification and efficient management, creating a "mobilization machine" immune to WhatsApp blocking.

---

## 2. Solution Architecture (The 3 Levels)

The platform operates on three hierarchical access layers:

### Level 1: The "General" (Campaign Dashboard - Web Admin)

- **User:** Marketing Team / Campaign Coordination.
- **Function:** Central intelligence. Creates narratives, defines goals ("Missions"), monitors KPIs, and engagement heatmaps.
- **Interface:** Desktop Dashboard (React/Next.js).

### Level 2: The "Captains" (The Leader's App - PWA/Mobile)

- **User:** Neighborhood leaders, campaign workers, and engaged volunteers.
- **Function:** Receive "Daily Missions" and execute them. This is the focus of the CRM.
- **Interface:** PWA (Progressive Web App) to avoid friction of app store installation.

### Level 3: The "Infantry" (The WhatsApp Bot - AI)

- **User:** Regular voter / Broad base.
- **Function:** Answer questions, consume passive content, and be recruited to become a "Captain."
- **Interface:** WhatsApp (via Official API).

---

## 3. Key Features ("The Gimmick")

### A. Decentralized Messaging ("Organic Peer-to-Peer")

- **Problem:** Official SIM cards blocked for spam.
- **Solution:** The system notifies Captains: _"Mission: Send this audio to 5 family groups."_
- **Result:** 500 leaders x 50 contacts = 25,000 impacts in minutes, via real organic traffic, undetectable as spam by platforms.

### B. Tracking and Attribution (Political Affiliate Link)

- Each Captain has unique links (e.g., `vote.com/joao/centro-sp`).
- The system tracks clicks and conversions generated by each link.
- Allows identifying which campaign workers bring real votes vs. those who don't perform.

### C. Gamification and Ranking

- Points system for completed missions (e.g., share link, bring new registration).
- Real-time ranking (State / Municipal / Neighborhood).
- Symbolic and access rewards (e.g., "Lunch with the Candidate," "Thank You Video").

### D. AI-powered Recruitment Funnel

- Voter clicks on Captain's link -> Lands on Official WhatsApp.
- The AI (trained on the government plan) nurtures the voter.
- **Upsell:** The AI invites the engaged voter to become a "Captain," closing the viral loop.

### E. Media Flow and Sharing (Zero Friction)

- **Storage:** Files (videos/audios) are uploaded once in the Admin ("General") to Cloud (S3 + CDN).
- **Experience (Web Share API):** The PWA temporarily downloads the file and invokes the native operating system sharing.
  - **The Material (Media):** The file is sent directly (native video/audio), allowing immediate playback on WhatsApp/Instagram without needing to click links to watch.
  - **The Caption (Tracking):** Along with the file, the system automatically injects the campaign text containing the **Captain's Affiliate Link** (e.g., `vote.vc/u/id_capitao`).
  - _Result:_ The Captain clicks "Complete Mission," WhatsApp opens with the video already loaded and the caption with the link ready.
- **Fallback:** If the browser does not support the API (desktop or old browsers), the system offers manual file download and automatically copies the text+link to the clipboard.

### F. Validation and Metrics System (Trust & Impact)

#### 1. The Technical Challenge (The WhatsApp "Black Box")

During the _discovery_ phase, we identified that WhatsApp does not have a public API that returns sending or reading confirmations for personal accounts (peer-to-peer). This creates a "blind spot": it's impossible to know with absolute certainty if the user sent the file to 1 person, 10 groups, or if they canceled the action on the last screen.

#### 2. Solution: Validation by Intent (Web Share API Level 2)

To circumvent this, we use the `Web Share API` (W3C Standard), natively supported by modern browsers (Chrome Mobile, Safari iOS).

- **Mechanism:** When invoking `navigator.share({ files: [...] })`, the browser takes control and returns a `Promise` (promise of execution).
- **The Trigger:** We monitor the resolution of this promise.
  - If the user selects WhatsApp and the action is completed by the operating system, the promise returns `success`.
  - At this point, we assume **"Optimistic Confirmation"**: the system understands that the mission has been completed and releases the "Effort" score.

#### 3. Fallback Mechanism (Compatibility)

For users on desktops or older browsers without file sharing API support:

- The system detects the absence of the API and changes the interface to a manual flow.
- **Secondary Trigger:** We monitor the `onClick` event on the "Download File" button.
- Although less precise, it maintains digital inclusion for all volunteers, allowing them to score even on limited devices.

#### 4. Scoring Philosophy: Effort vs. Result

To mitigate fraud (e.g., clicking and not sending) and value those who truly bring votes, we divide gamification into two layers:

- **Engagement Points (The "Salary"):**
  - Fixed value (e.g., 10 pts) given by the **sharing action** (API/Download trigger).
  - Serves to maintain the volunteer's habit and morale.

- **Impact Points (The "Commission"):**
  - Variable and high value (e.g., 50 pts per click).
  - **How it works:** Every share automatically injects a caption with a unique traceable link (`ref=id_capitao`).
  - If third parties click on this link, the system assigns extra points to the original Captain.
  - This aligns the incentive: the Captain wants to share _good_ content with _relevant_ groups, as it's the real click that makes them climb the Ranking.

#### 5. Anti-Gaming Security Layers (Click Fraud)

To prevent users from artificially inflating their points by clicking on their own links, we implemented invisible barriers on the server:

- **Layer 1: Session Exclusion (Self-Click)**
  - The system checks if the clicking browser has the authentication _token_ of a logged-in Captain. If so, the click is registered as "test" but **does not generate points**.
- **Layer 2: Device Fingerprinting (Deduplication)**
  - We create a unique digital signature of the visitor (Hash of IP + User Agent + Screen Resolution).
  - **Rule:** Only 1 click is counted per _Fingerprint_ every 24 hours. Subsequent clicks from the same device are ignored for scoring purposes.
  - **Layer 3: Velocity Check (Rate Limiter)**
  - Monitoring for anomalous peaks (e.g., 100 clicks in 1 minute coming from the same IP range). Triggers an alert and temporarily freezes the score for that suspicious link.

### G. Redirection and Attribution Flow (The Viral "Loop")

This flow connects video sharing to the recruitment of new volunteers via WhatsApp Bot.

1.  **The Link (Entry):** The voter clicks on the short link in the caption (`vote.vc/u/capitao-joao`).
2.  **The "Toll" (Processing):**
    - The request hits our server (Edge Middleware).
    - The system validates the legitimacy of the click (Anti-Fraud).
    - If valid: Computes +50 points for `capitao-joao`.
3.  **The Redirection (Contextual Deep Link):**
    - The server redirects the user to the WhatsApp API (`wa.me`).
    - **Payload:** We inject a predefined message with a tracking parameter.
    - _Final URL:_ `wa.me/BOT_NUMBER?text=I saw the Health video and want to know more. (ref:capitao-joao)`
    - **The Closing (Bot):**
    - The voter sends the message.
    - The Bot (AI) reads the `ref` parameter and links this new voter to Captain JoÃ£o's wallet in the CRM.

### H. Contextual Landing Pages (The Strategic "Intermediate")

To transform the click into **Structured Intelligence** even before the conversation begins, the system introduces a configurable intermediate layer.

#### 1. Operation Modes (Configured by the General in the Mission)

- **Mode A: Express (Click-to-Chat)**
  - _Flow:_ Link -> Immediate Redirection (307) -> WhatsApp.
  - _Use:_ Urgent viral videos where volume is a priority.

- **Mode B: Active Listening (Qualified Collection)**
  - _Interface (Micro-Frontend):_
    - **Header:** Restates the mission theme (e.g., "What did you think of the Health proposal?").
    - **Select Box (Categorization):** List of predefined themes (Health, Security, Education, Transportation). _This structures the data for statistics._
    - **Text Area (Qualitative):** Space for the voter to type a specific suggestion or complaint.
    - **Identification Inputs:** Name and WhatsApp (Optional pre-fill).
  - _Decision UX (Dual Choice):_
    - **Primary Button ("Send and Chat"):** Saves data to the database and opens WhatsApp.
    - **Secondary Button ("Skip and Go Directly to WhatsApp"):** Ignores the form and opens WhatsApp with only basic tracking.

- **Mode C: Mobilization (Single Action)**
  - _Interface:_ Giant "Confirm Presence" or "Sign Support" button.
  - _Action:_ Registers support with a click and redirects to the Bot only for thanks.

#### 2. Data Flow and Context "Handover"

The magic happens in the handoff from the Web Page to the Bot:

1.  **Capture:** The voter fills in "Health" and writes "There's no doctor at the X Neighborhood clinic."
2.  **Processing:** The PWA sends this to the Backend (`POST /api/feedback`).
    - The system saves the suggestion in the database.
    - The system generates a Context ID (`ctx_123`).
3.  **Smart Redirection:**
    - The Backend returns the WhatsApp URL with the context injected:
    - `wa.me/BOT?text=Hello, I just sent my suggestion. (ref:ctx_123)`
4.  **AI Welcome:**
    - The Bot receives the message and extracts `ctx_123`.
    - It queries the database, sees that the theme is **Health**.
    - **Personalized Response:** Instead of "Hello, type 1 for Health," the Bot responds: _"Thanks for the suggestion about the X Neighborhood clinic! Did you know our Health proposal includes..."_

---

## 4. Technology Stack

- **To be defined** (Will be detailed after the technical architecture phase).

---

## 5. Business and Legal Strategy

### Sales Model

- Sale of the "Mobilization Machine" (B2B SaaS).
- Setup + Monthly Fee + Fee per volume of Captains.

### Legal Viability (Brazil - TSE)

- **Compliance:** The tool focuses on **volunteer management**, not automated mass messaging to cold leads (prohibited).
- The act of sending is manual and voluntary, performed by the phone owner (the Captain), which characterizes it as legitimate organic mobilization.

---

## 6. Development Roadmap

1.  **Phase 1 (Immediate MVP):** Focus on **Management and Gamification**.
    - General's Dashboard (Admin).
    - Captain's PWA (Missions and Ranking).
    - Link Tracking System.
2.  **Phase 2:** Automation and AI.
    - WhatsApp Bot for voter reception.
    - Recruitment funnel integration.
